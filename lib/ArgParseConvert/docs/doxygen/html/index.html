<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ArgParseConvert: ArgParseConvert</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ArgParseConvert
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A C++ library for command-line argument and configuration file parsing.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ArgParseConvert </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/JasperBraun/ArgParseConvert.git">GitHub repository.</a></p>
<p><a href="https://jasperbraun.github.io/ArgParseConvert/doxygen/html/index.html">GitHub Pages.</a></p>
<p>Yet another argument parsing library designed mainly for personal use. This library provides facilities to configure positional, keyword and flag parameters, parse command-line style argument lists and configuration files, convert arguments to values of the respective parameter's types, and generate a formatted help-string for viewing in a shell window.</p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-example">Quick example</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation</h1>
<p><em><b>Prerequisites:</b></em></p><ul>
<li>C++17</li>
<li>cmake version 3.0 or higher</li>
<li>git (optional)</li>
</ul>
<p><em><b>To build binary:</b></em></p><ol type="1">
<li>Download or clone into desired directory.</li>
<li>On command line <code>cd</code> into the directory.</li>
<li>Execute <code>mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make</code>.</li>
<li>Done! The binary library file (<code>libarg_parse_convert.a</code>) is in the build directory.</li>
</ol>
<p><em><b>To include in cmake project:</b></em></p><ol type="1">
<li>Download or clone into desired directory in project tree.</li>
<li>In the Parent directory's <code>CMakeList.txt</code> file, add the cloned directory as subdirectory (using <code>add_subdirectory</code>).</li>
<li>Link the library target <code><a class="el" href="namespacearg__parse__convert.html" title="Library namespace.">arg_parse_convert</a></code> to all targets which use it, in the source code include <code><a class="el" href="arg__parse__convert_8h_source.html">arg_parse_convert.h</a></code>, and add the <code>ArgParseConvert/include</code> directory to the target's include directories (using <code>target_include_directories</code>).</li>
</ol>
<p><em><b>Unit tests:</b></em> Unit tests are included and compiled when in debug mode. After building, they can be run using <code>ctest</code>. To change when unit tests are built, the top-level CMakeList.txt must be changed appropriately.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Overview</h1>
<p>For installation instructions, see <a href="#installation">Installation</a>. For a usage example to copy-paste and modify as needed, see <a href="#quick-example">Quick example</a>.</p>
<p>The ArgParse convert library essentially consists of four components:</p><ul>
<li>The <code>ParameterMap</code> and <code>Parameter</code> classes offer methods to configure and register various parameters for which arguments are parsed.</li>
<li>The <code>ParseArgs</code> and <code>ParseFile</code> functions parse command-line style arguments or configuration files as specified by a <code>ParameterMap</code> object.</li>
<li>The <code>ArgumentMap</code> class stores configurations of parameters in the form of a <code>ParameterMap</code> object together with their assigned arguments, and allows for retrieval of the parameter values.</li>
<li>The <code>FormattedHelpString</code> function can be used to generate a help-string from the various settings specified for the parameters contained in a <code>ParameterMap</code> object.</li>
</ul>
<p>These entities are designed to be used as follows:</p><ol type="1">
<li>Register various <code>Parameter</code> objects in a <code>ParameterMap</code> object, using the <code>()</code> operator of <code>ParameterMap</code> and the factory functions of <code>Parameter</code>.</li>
<li>Create an <code>ArgumentMap</code> object from the <code>ParameterMap</code> object.</li>
<li>Store arguments for the various parameters in the <code>ArgumentMap</code> from a command-line style list of arguments via <code>ParseArgs</code>, or from a configuration file via <code>ParseFile</code>.</li>
<li>Retrieve values of parameters using the <code>GetValue</code> and <code>GetAllValues</code> methods of the <code>ArgumentMap</code>.</li>
<li>If desired, generate a help-string using <code>FormattedHelpString</code>.</li>
</ol>
<p>An overview of the main aspects of each of these classes and functions is provided here. For more detailed information on how to use each of the classes and functinos, see [Reference](whoops).</p>
<p>**Parameter class template***</p>
<p>Parameters are instantiations of the <code>Parameter</code> class template. The template parameter defines the type that the parameter values should take. Creation of a <code>Parameter</code> object occurs via its factory methods:</p><ul>
<li><code>Parameter&lt;bool&gt;::Flag</code> to create a <em>flag</em>.</li>
<li><code>Parameter&lt;T&gt;::Keyword</code> to create a <em>keyword parameter</em> of type <code>T</code>.</li>
<li><code>Parameter&lt;T&gt;::Positional</code> to create a <em>positional parameter</em> of type <code>T</code>.</li>
</ul>
<p><em>Keyword parameters</em> and <em>positional parameters</em> require the specification of a conversion function, which determines how string arguments are interpreted. The conversion function for a parameter of type <code>T</code> must be an object of the form: </p><div class="fragment"><div class="line">std::function&lt;T(const std::string&amp;)&gt;</div>
</div><!-- fragment --><p>The <code>AddDefault</code> and <code>SetDefault</code> function members can be used to configure default arguments for the parameter. Function members <code>MinArgs</code> and <code>MaxArgs</code> can be used to restrict the number of arguments a parameter takes. The function members <code>Description</code> and <code>Placeholder</code> can be used to customize how a <code>Parameter</code> object is displayed in the help-string generated by <code>FormattedHelpString</code>.</p>
<p><b>ParameterMap class</b></p>
<p>The configuration of various parameters, as well as their conversion functions can be stored in a <code>ParameterMap</code> object using its <code>()</code> operator. A <code>ParameterMap</code> object simply organizes the parameters for the advantage of <code>ParseArgs</code>, <code>ParseFile</code> and <code>FormattedHelpString</code>.</p>
<p><b>ArgumentMap class</b></p>
<p>An <code>ArgumentMap</code> object contains a <code>ParameterMap</code> instance to determine the settings of the parameters whose arguments it stores. Parameter values can be obtained using the <code>GetValue</code> and <code>GetAllValues</code> function members. The member <code>IsSet</code> tests whether a flag was set. Default arguments can be assigned using the <code>SetDefaultArguments</code> function member. Parameters which did not receive enough arguments can be obtained using the <code>GetUnfilledParameters</code> function member.</p>
<p><b>ParseArgs and ParseFile functions</b></p>
<p><code>ParseArgs</code> takes command-line style argument lists (<code>argc</code>, <code>argv</code>) together with an <code>ArgumentMap</code> object and stores the various arguments for appropriate parameters in the <code>ArgumentMap</code>. <code>ParseFile</code> takes an input stream and interprets it as a configuration file assigning arguments to approriate parameters in the <code>ArgumentMap</code> object.</p>
<p>Both functions return a list of arguments for which no appropriate parameters were found. If some arguments were already assigned to parameters in the <code>ArgumentMap</code>, then any parsed arguments that would usually be assigned to those parameters are included in the return value, instead.</p>
<p><b>FormattedHelpString function</b></p>
<p><code>FormattedHelpString</code> is designed to automate the generation of help a string. The help string is meant to look like the types of help-strings produced by typical command-line programs when passed the <code>--help</code> or <code>-h</code> flag. The width and indentations can be customized by specifying its parameters, instead of using their default values.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Quick example</h1>
<p><code>command</code>'s <code>main.cc</code> file: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;arg_parse_convert.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Alternatively, write this function in a separate file and include it.</span></div>
<div class="line"><a class="code" href="classarg__parse__convert_1_1_parameter_map.html">arg_parse_convert::ParameterMap</a> InitParameters() {</div>
<div class="line">  <a class="code" href="classarg__parse__convert_1_1_parameter_map.html">arg_parse_convert::ParameterMap</a> parameters;</div>
<div class="line">  <span class="comment">// Chain `operator()` to add parameters.</span></div>
<div class="line">  <span class="comment">// Placement of parentheses and semi-colon is important.</span></div>
<div class="line">  <span class="comment">// Use `Parameter` factory functions.</span></div>
<div class="line">  parameters(<a class="code" href="classarg__parse__convert_1_1_parameter.html">arg_parse_convert::Parameter&lt;int&gt;::Positional</a>(</div>
<div class="line">                 arg_parse_convert::converters::stoi,</div>
<div class="line">                 <span class="stringliteral">&quot;foo&quot;</span>, 0)</div>
<div class="line">             .Description(<span class="stringliteral">&quot;Positional parameter foo description.&quot;</span>))</div>
<div class="line"> </div>
<div class="line">            (<a class="code" href="classarg__parse__convert_1_1_parameter.html#a1166856bccbdabe2030d6914c54ccc6b">arg_parse_convert::Parameter&lt;std::string&gt;::Keyword</a>(</div>
<div class="line">                 arg_parse_convert::converters::StringIdentity,</div>
<div class="line">                 {<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;config&quot;</span>, <span class="stringliteral">&quot;configuration-file&quot;</span>})</div>
<div class="line">             .Description(<span class="stringliteral">&quot;Keyword parameter description. Long description&quot;</span></div>
<div class="line">                          <span class="stringliteral">&quot; which spans multiple lines. Parameter requires lots&quot;</span></div>
<div class="line">                          <span class="stringliteral">&quot; of explaining.&quot;</span>))</div>
<div class="line"> </div>
<div class="line">            (<a class="code" href="classarg__parse__convert_1_1_parameter.html">arg_parse_convert::Parameter&lt;bool&gt;::Flag</a>({<span class="stringliteral">&quot;h&quot;</span>, <span class="stringliteral">&quot;help&quot;</span>})</div>
<div class="line">             .Description(<span class="stringliteral">&quot;Print this help message and exit.&quot;</span>));</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Add more arguments.</span></div>
<div class="line">  <span class="keywordflow">return</span> parameters;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div>
<div class="line">  std::vector&lt;std::string&gt; additional_arguments;</div>
<div class="line">  <span class="keywordflow">try</span> {</div>
<div class="line">    <a class="code" href="classarg__parse__convert_1_1_parameter_map.html">arg_parse_convert::ParameterMap</a> parameters{InitParameters()};</div>
<div class="line">    <a class="code" href="classarg__parse__convert_1_1_argument_map.html">arg_parse_convert::ArgumentMap</a> arguments{std::move(parameters)};</div>
<div class="line">    additional_arguments = <a class="code" href="group___arg_parse_convert-_reference.html#gaa56c513827255506022f852ee3c7c3fd">arg_parse_convert::ParseArgs</a>(argc, argv, arguments);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!additional_arguments.empty()) {</div>
<div class="line">      <span class="comment">// Some arguments couldn&#39;t be assiged to parameters.</span></div>
<div class="line">      std::cerr &lt;&lt; <span class="stringliteral">&quot;Invalid argument: &quot;</span> &lt;&lt; additional_arguments.at(0)</div>
<div class="line">                &lt;&lt; std::endl;</div>
<div class="line">      <span class="keywordflow">return</span> 1;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arguments.IsSet(<span class="stringliteral">&quot;help&quot;</span>)) {</div>
<div class="line">      std::cout &lt;&lt; <a class="code" href="group___arg_parse_convert-_reference.html#gaed13184abc4ef1a00be91b1df44fe442">arg_parse_convert::FormattedHelpString</a>(arguments.Parameters())</div>
<div class="line">                &lt;&lt; std::endl;</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arguments.HasArgument(<span class="stringliteral">&quot;configuration-file&quot;</span>)) {</div>
<div class="line">      std::ifstream ifs{arguments.GetValue(<span class="stringliteral">&quot;configuration-file&quot;</span>)};</div>
<div class="line">      <span class="keywordflow">if</span> (ifs.is_open()) {</div>
<div class="line">        additional_arguments = <a class="code" href="group___arg_parse_convert-_reference.html#ga2e4ceca915544e261bf0b38c89a047fc">arg_parse_convert::ParseFile</a>(&amp;ifs, arguments);</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Unable to open configuration file: &quot;</span></div>
<div class="line">                  &lt;&lt; arguments.GetValue(<span class="stringliteral">&quot;configuration-file&quot;</span>) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">if</span> (!additional_arguments.empty()) {</div>
<div class="line">        <span class="comment">// Some arguments couldn&#39;t be assiged to parameters.</span></div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Invalid argument: &quot;</span> &lt;&lt; additional_arguments.at(0)</div>
<div class="line">                  &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> arg_parse_convert::exceptions::BaseException&amp; e) {</div>
<div class="line">    <span class="comment">// Handle exception</span></div>
<div class="line">  } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line">    <span class="comment">// Handle exception</span></div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Do work here.</span></div>
<div class="line">  <span class="comment">// Access parsed parameter values using methods `GetValue` and `GetAllValues`.</span></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Executing <code>command 1 2 3</code> will lead to the following behavior: </p><div class="fragment"><div class="line">arguments.GetAllValues(<span class="stringliteral">&quot;foo&quot;</span>) == std::vector&lt;int&gt;{1, 2, 3} <span class="comment">// true</span></div>
<div class="line">arguments.GetValue(<span class="stringliteral">&quot;foo&quot;</span>) == 1 <span class="comment">// true</span></div>
<div class="line">arguments.GetValue(<span class="stringliteral">&quot;foo&quot;</span>, 1) == 2 <span class="comment">//true</span></div>
<div class="line">arguments.GetValue(<span class="stringliteral">&quot;foo&quot;</span>, 2) == 3 <span class="comment">//true</span></div>
<div class="line">arguments.GetValue(<span class="stringliteral">&quot;foo&quot;</span>, 3) <span class="comment">// throws exception</span></div>
</div><!-- fragment --><p>Executing <code>command -c config_file.config</code>, where <code>config_file.config</code> contains: </p><div class="fragment"><div class="line"># Some description of foo.</div>
<div class="line"># foo is a positional parameter.</div>
<div class="line"> </div>
<div class="line">foo=1 2 3</div>
</div><!-- fragment --><p>leads to the same behavior.</p>
<p>Executing <code>command -h</code> or <code>command --help</code> will print the following help message: </p><div class="fragment"><div class="line">Optional positional parameters:</div>
<div class="line">    foo</div>
<div class="line">        Positional parameter foo description.</div>
<div class="line"> </div>
<div class="line">Optional keyword parameters:</div>
<div class="line">    -c, --config, --configuration-file &lt;ARG&gt;</div>
<div class="line">        Keyword parameter description. Long description which spans multiple</div>
<div class="line">        lines. Parameter requires lots of explaining.</div>
<div class="line"> </div>
<div class="line">Flags:</div>
<div class="line">    -h, --help</div>
<div class="line">        Print this help message and exit.</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="agroup___arg_parse_convert-_reference_html_gaed13184abc4ef1a00be91b1df44fe442"><div class="ttname"><a href="group___arg_parse_convert-_reference.html#gaed13184abc4ef1a00be91b1df44fe442">arg_parse_convert::FormattedHelpString</a></div><div class="ttdeci">std::string FormattedHelpString(const ParameterMap &amp;parameter_map, std::string header=&quot;&quot;, std::string footer=&quot;&quot;, int width=80, int parameter_indentation=4, int description_indentation=8)</div><div class="ttdoc">Returns a formatted help string for the parameters contained in parameter_map.</div><div class="ttdef"><b>Definition:</b> help_string_formatters.cc:182</div></div>
<div class="ttc" id="aclassarg__parse__convert_1_1_parameter_html"><div class="ttname"><a href="classarg__parse__convert_1_1_parameter.html">arg_parse_convert::Parameter</a></div><div class="ttdoc">Bundles ParameterConfiguration object with conversion function and provides factories.</div><div class="ttdef"><b>Definition:</b> parameter.h:377</div></div>
<div class="ttc" id="aclassarg__parse__convert_1_1_argument_map_html"><div class="ttname"><a href="classarg__parse__convert_1_1_argument_map.html">arg_parse_convert::ArgumentMap</a></div><div class="ttdoc">Stores arguments for an internal ParameterMap member's parameters and allows for retrieving the param...</div><div class="ttdef"><b>Definition:</b> argument_map.h:47</div></div>
<div class="ttc" id="aclassarg__parse__convert_1_1_parameter_map_html"><div class="ttname"><a href="classarg__parse__convert_1_1_parameter_map.html">arg_parse_convert::ParameterMap</a></div><div class="ttdoc">A ParameterMap stores the configurations of parameters.</div><div class="ttdef"><b>Definition:</b> parameter_map.h:55</div></div>
<div class="ttc" id="agroup___arg_parse_convert-_reference_html_ga2e4ceca915544e261bf0b38c89a047fc"><div class="ttname"><a href="group___arg_parse_convert-_reference.html#ga2e4ceca915544e261bf0b38c89a047fc">arg_parse_convert::ParseFile</a></div><div class="ttdeci">std::vector&lt; std::string &gt; ParseFile(std::istream &amp;is, ArgumentMap &amp;arguments)</div><div class="ttdoc">Assigns arguments listed in is to parameters registered with the ParameterMap member of arguments.</div><div class="ttdef"><b>Definition:</b> parsers.cc:303</div></div>
<div class="ttc" id="agroup___arg_parse_convert-_reference_html_gaa56c513827255506022f852ee3c7c3fd"><div class="ttname"><a href="group___arg_parse_convert-_reference.html#gaa56c513827255506022f852ee3c7c3fd">arg_parse_convert::ParseArgs</a></div><div class="ttdeci">std::vector&lt; std::string &gt; ParseArgs(int argc, const char **argv, ArgumentMap &amp;arguments)</div><div class="ttdoc">Assigns members of argv to parameters registered with the ParameterMap member of arguments.</div><div class="ttdef"><b>Definition:</b> parsers.cc:185</div></div>
<div class="ttc" id="aclassarg__parse__convert_1_1_parameter_html_a1166856bccbdabe2030d6914c54ccc6b"><div class="ttname"><a href="classarg__parse__convert_1_1_parameter.html#a1166856bccbdabe2030d6914c54ccc6b">arg_parse_convert::Parameter::Keyword</a></div><div class="ttdeci">static Parameter&lt; ParameterType &gt; Keyword(std::function&lt; ParameterType(const std::string &amp;)&gt; converter, std::vector&lt; std::string &gt; names)</div><div class="ttdoc">Creates a keyword parameter identified by names, with provided conversion function.</div><div class="ttdef"><b>Definition:</b> parameter.h:597</div></div>
<!-- HTML footer for doxygen 1.8.17-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
